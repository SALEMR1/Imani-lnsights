// ملف أذكار الصلاة
document.addEventListener('DOMContentLoaded', function() {
    // بيانات أذكار الصلاة
    const prayerAzkar = [
        {
            title: "أذكار قبل الصلاة",
            items: [
                {
                    text: "اللَّهُمَّ بَاعِدْ بَيْنِي وَبَيْنَ خَطَايَايَ كَمَا بَاعَدْتَ بَيْنَ الْمَشْرِقِ وَالْمَغْرِبِ، اللَّهُمَّ نَقِّنِي مِنْ خَطَايَايَ كَمَا يُنَقَّى الثَّوْبُ الْأَبْيَضُ مِنَ الدَّنَسِ، اللَّهُمَّ اغْسِلْنِي مِنْ خَطَايَايَ بِالثَّلْجِ وَالْمَاءِ وَالْبَرَدِ",
                    count: 1,
                    reference: "يقال بعد تكبيرة الإحرام. [رواه البخاري ومسلم]"
                },
                {
                    text: "سُبْحَانَكَ اللَّهُمَّ وَبِحَمْدِكَ، وَتَبَارَكَ اسْمُكَ، وَتَعَالَى جَدُّكَ، وَلَا إِلَٰهَ غَيْرُكَ",
                    count: 1,
                    reference: "يقال بعد تكبيرة الإحرام. [رواه أبو داود والترمذي والنسائي وابن ماجه]"
                },
                {
                    text: "أَعُوذُ بِاللهِ السَّمِيعِ الْعَلِيمِ مِنَ الشَّيْطَانِ الرَّجِيمِ، مِنْ هَمْزِهِ وَنَفْخِهِ وَنَفْثِهِ",
                    count: 1,
                    reference: "يقال قبل قراءة الفاتحة. [رواه أبو داود والترمذي]"
                }
            ]
        },
        {
            title: "أذكار الركوع",
            items: [
                {
                    text: "سُبْحَانَ رَبِّيَ الْعَظِيمِ",
                    count: 3,
                    reference: "تقال في الركوع. [رواه أبو داود والترمذي والنسائي وابن ماجه]"
                },
                {
                    text: "سُبْحَانَكَ اللَّهُمَّ رَبَّنَا وَبِحَمْدِكَ، اللَّهُمَّ اغْفِرْ لِي",
                    count: 1,
                    reference: "تقال في الركوع. [رواه البخاري ومسلم]"
                },
                {
                    text: "سُبُّوحٌ، قُدُّوسٌ، رَبُّ الْمَلَائِكَةِ وَالرُّوحِ",
                    count: 1,
                    reference: "تقال في الركوع. [رواه مسلم]"
                }
            ]
        },
        {
            title: "أذكار الرفع من الركوع",
            items: [
                {
                    text: "سَمِعَ اللهُ لِمَنْ حَمِدَهُ",
                    count: 1,
                    reference: "يقولها الإمام والمنفرد عند الرفع من الركوع. [رواه البخاري]"
                },
                {
                    text: "رَبَّنَا وَلَكَ الْحَمْدُ، حَمْدًا كَثِيرًا طَيِّبًا مُبَارَكًا فِيهِ",
                    count: 1,
                    reference: "يقولها الجميع بعد الرفع من الركوع. [رواه البخاري]"
                },
                {
                    text: "رَبَّنَا لَكَ الْحَمْدُ مِلْءَ السَّمَاوَاتِ وَمِلْءَ الْأَرْضِ، وَمِلْءَ مَا بَيْنَهُمَا، وَمِلْءَ مَا شِئْتَ مِنْ شَيْءٍ بَعْدُ، أَهْلَ الثَّنَاءِ وَالْمَجْدِ، أَحَقُّ مَا قَالَ الْعَبْدُ، وَكُلُّنَا لَكَ عَبْدٌ، اللَّهُمَّ لَا مَانِعَ لِمَا أَعْطَيْتَ، وَلَا مُعْطِيَ لِمَا مَنَعْتَ، وَلَا يَنْفَعُ ذَا الْجَدِّ مِنْكَ الْجَدُّ",
                    count: 1,
                    reference: "يقال بعد الرفع من الركوع. [رواه مسلم]"
                }
            ]
        },
        {
            title: "أذكار السجود",
            items: [
                {
                    text: "سُبْحَانَ رَبِّيَ الْأَعْلَى",
                    count: 3,
                    reference: "تقال في السجود. [رواه أبو داود والترمذي والنسائي وابن ماجه]"
                },
                {
                    text: "سُبْحَانَكَ اللَّهُمَّ رَبَّنَا وَبِحَمْدِكَ، اللَّهُمَّ اغْفِرْ لِي",
                    count: 1,
                    reference: "تقال في السجود. [رواه البخاري ومسلم]"
                },
                {
                    text: "اللَّهُمَّ لَكَ سَجَدْتُ، وَبِكَ آمَنْتُ، وَلَكَ أَسْلَمْتُ، سَجَدَ وَجْهِي لِلَّذِي خَلَقَهُ، وَصَوَّرَهُ، وَشَقَّ سَمْعَهُ وَبَصَرَهُ، تَبَارَكَ اللهُ أَحْسَنُ الْخَالِقِينَ",
                    count: 1,
                    reference: "تقال في السجود. [رواه مسلم]"
                },
                {
                    text: "سُبُّوحٌ، قُدُّوسٌ، رَبُّ الْمَلَائِكَةِ وَالرُّوحِ",
                    count: 1,
                    reference: "تقال في السجود. [رواه مسلم]"
                },
                {
                    text: "اللَّهُمَّ اغْفِرْ لِي ذَنْبِي كُلَّهُ، دِقَّهُ وَجِلَّهُ، وَأَوَّلَهُ وَآخِرَهُ، وَعَلَانِيَتَهُ وَسِرَّهُ",
                    count: 1,
                    reference: "تقال في السجود. [رواه مسلم]"
                }
            ]
        },
        {
            title: "أذكار الجلوس بين السجدتين",
            items: [
                {
                    text: "رَبِّ اغْفِرْ لِي، رَبِّ اغْفِرْ لِي",
                    count: 1,
                    reference: "تقال بين السجدتين. [رواه أبو داود وابن ماجه]"
                },
                {
                    text: "اللَّهُمَّ اغْفِرْ لِي، وَارْحَمْنِي، وَاهْدِنِي، وَاجْبُرْنِي، وَعَافِنِي، وَارْزُقْنِي، وَارْفَعْنِي",
                    count: 1,
                    reference: "تقال بين السجدتين. [رواه أبو داود والترمذي وابن ماجه]"
                }
            ]
        },
        {
            title: "التشهد",
            items: [
                {
                    text: "التَّحِيَّاتُ لِلَّهِ، وَالصَّلَوَاتُ، وَالطَّيِّبَاتُ، السَّلَامُ عَلَيْكَ أَيُّهَا النَّبِيُّ وَرَحْمَةُ اللهِ وَبَرَكَاتُهُ، السَّلَامُ عَلَيْنَا وَعَلَى عِبَادِ اللهِ الصَّالِحِينَ، أَشْهَدُ أَنْ لَا إِلَٰهَ إِلَّا اللهُ، وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُولُهُ",
                    count: 1,
                    reference: "يقال في التشهد الأول والأخير. [رواه البخاري ومسلم]"
                },
                {
                    text: "اللَّهُمَّ صَلِّ عَلَى مُحَمَّدٍ وَعَلَى آلِ مُحَمَّدٍ، كَمَا صَلَّيْتَ عَلَى إِبْرَاهِيمَ وَعَلَى آلِ إِبْرَاهِيمَ، إِنَّكَ حَمِيدٌ مَجِيدٌ، اللَّهُمَّ بَارِكْ عَلَى مُحَمَّدٍ وَعَلَى آلِ مُحَمَّدٍ، كَمَا بَارَكْتَ عَلَى إِبْرَاهِيمَ وَعَلَى آلِ إِبْرَاهِيمَ، إِنَّكَ حَمِيدٌ مَجِيدٌ",
                    count: 1,
                    reference: "يقال بعد التشهد الأخير. [رواه البخاري ومسلم]"
                }
            ]
        },
        {
            title: "الدعاء قبل السلام",
            items: [
                {
                    text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ عَذَابِ الْقَبْرِ، وَمِنْ عَذَابِ جَهَنَّمَ، وَمِنْ فِتْنَةِ الْمَحْيَا وَالْمَمَاتِ، وَمِنْ شَرِّ فِتْنَةِ الْمَسِيحِ الدَّجَّالِ",
                    count: 1,
                    reference: "يقال بعد التشهد الأخير وقبل السلام. [رواه البخاري ومسلم]"
                },
                {
                    text: "اللَّهُمَّ إِنِّي ظَلَمْتُ نَفْسِي ظُلْمًا كَثِيرًا، وَلَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ، فَاغْفِرْ لِي مَغْفِرَةً مِنْ عِنْدِكَ، وَارْحَمْنِي، إِنَّكَ أَنْتَ الْغَفُورُ الرَّحِيمُ",
                    count: 1,
                    reference: "يقال بعد التشهد الأخير وقبل السلام. [رواه البخاري ومسلم]"
                }
            ]
        },
        {
            title: "أذكار بعد السلام من الصلاة",
            items: [
                {
                    text: "أَسْتَغْفِرُ اللهَ (ثلاثاً)، اللَّهُمَّ أَنْتَ السَّلَامُ، وَمِنْكَ السَّلَامُ، تَبَارَكْتَ يَا ذَا الْجَلَالِ وَالْإِكْرَامِ",
                    count: 1,
                    reference: "يقال بعد السلام من الصلاة. [رواه مسلم]"
                },
                {
                    text: "لَا إِلَٰهَ إِلَّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، اللَّهُمَّ لَا مَانِعَ لِمَا أَعْطَيْتَ، وَلَا مُعْطِيَ لِمَا مَنَعْتَ، وَلَا يَنْفَعُ ذَا الْجَدِّ مِنْكَ الْجَدُّ",
                    count: 1,
                    reference: "يقال بعد السلام من الصلاة. [رواه البخاري ومسلم]"
                },
                {
                    text: "لَا إِلَٰهَ إِلَّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، لَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللهِ، لَا إِلَٰهَ إِلَّا اللهُ، وَلَا نَعْبُدُ إِلَّا إِيَّاهُ، لَهُ النِّعْمَةُ وَلَهُ الْفَضْلُ وَلَهُ الثَّنَاءُ الْحَسَنُ، لَا إِلَٰهَ إِلَّا اللهُ مُخْلِصِينَ لَهُ الدِّينَ وَلَوْ كَرِهَ الْكَافِرُونَ",
                    count: 1,
                    reference: "يقال بعد السلام من الصلاة. [رواه مسلم]"
                },
                {
                    text: "سُبْحَانَ اللهِ (33 مرة)، الْحَمْدُ لِلَّهِ (33 مرة)، اللهُ أَكْبَرُ (33 مرة)، لَا إِلَٰهَ إِلَّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ (مرة واحدة)",
                    count: 1,
                    reference: "يقال بعد السلام من الصلاة. [رواه مسلم]"
                },
                {
                    text: "قراءة آية الكرسي: ﴿اللهُ لَا إِلَٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ وَلَا يَئُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ﴾",
                    count: 1,
                    reference: "من قرأها دبر كل صلاة لم يمنعه من دخول الجنة إلا الموت. [رواه النسائي]"
                }
            ]
        }
    ];

    // الحصول على عنصر حاوية أذكار الصلاة
    const prayerContainer = document.getElementById('prayer-azkar');
    
    // التحقق من وجود الحاوية
    if (!prayerContainer) {
        console.error('لم يتم العثور على حاوية أذكار الصلاة');
        return;
    }
    
    // مسح المحتوى الحالي
    prayerContainer.innerHTML = '';
    
    // إضافة الأذكار إلى الحاوية
    prayerAzkar.forEach(section => {
        // إنشاء عنوان القسم
        const sectionTitle = document.createElement('h3');
        sectionTitle.className = 'azkar-section-title';
        sectionTitle.textContent = section.title;
        prayerContainer.appendChild(sectionTitle);
        
        // إضافة أذكار القسم
        section.items.forEach(zikr => {
            // إنشاء بطاقة الذكر
            const zikrCard = document.createElement('div');
            zikrCard.className = 'zikr-card';
            
            // إنشاء نص الذكر
            const zikrText = document.createElement('div');
            zikrText.className = 'zikr-text';
            
            // إنشاء فقرة النص
            const paragraph = document.createElement('p');
            paragraph.textContent = zikr.text;
            zikrText.appendChild(paragraph);
            
            // إنشاء قسم المصدر إذا كان موجوداً
            if (zikr.reference) {
                const reference = document.createElement('div');
                reference.className = 'zikr-reference';
                reference.textContent = zikr.reference;
                zikrText.appendChild(reference);
            }
            
            // إنشاء قسم العدد
            const zikrCount = document.createElement('div');
            zikrCount.className = 'zikr-count';
            
            // إنشاء نص العدد
            const countText = document.createElement('span');
            countText.textContent = zikr.count > 1 ? `${zikr.count} مرات` : 'مرة واحدة';
            zikrCount.appendChild(countText);
            
            // إنشاء زر العد
            const countButton = document.createElement('button');
            countButton.innerHTML = '<i class="fas fa-plus"></i>';
            
            // إضافة وظيفة العد
            let currentCount = 0;
            countButton.addEventListener('click', function() {
                if (currentCount < zikr.count) {
                    currentCount++;
                    countText.textContent = `${currentCount}/${zikr.count}`;
                    
                    // إذا اكتمل العدد، تغيير لون الزر
                    if (currentCount === zikr.count) {
                        this.style.backgroundColor = '#84b026';
                    }
                }
            });
            
            // إضافة زر العد إلى قسم العدد
            zikrCount.appendChild(countButton);
            
            // إضافة الأقسام إلى بطاقة الذكر
            zikrCard.appendChild(zikrText);
            zikrCard.appendChild(zikrCount);
            
            // إضافة بطاقة الذكر إلى الحاوية
            prayerContainer.appendChild(zikrCard);
        });
    });
});
