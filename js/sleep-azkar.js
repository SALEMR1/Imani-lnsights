// ملف أذكار النوم
document.addEventListener('DOMContentLoaded', function() {
    // بيانات أذكار النوم
    const sleepAzkar = [
        {
            text: "بِاسْمِكَ اللَّهُمَّ أَمُوتُ وَأَحْيَا",
            count: 1,
            reference: "رواه البخاري ومسلم"
        },
        {
            text: "اللَّهُمَّ أَسْلَمْتُ نَفْسِي إِلَيْكَ، وَفَوَّضْتُ أَمْرِي إِلَيْكَ، وَوَجَّهْتُ وَجْهِي إِلَيْكَ، وَأَلْجَأْتُ ظَهْرِي إِلَيْكَ، رَغْبَةً وَرَهْبَةً إِلَيْكَ، لَا مَلْجَأَ وَلَا مَنْجَا مِنْكَ إِلَّا إِلَيْكَ، آمَنْتُ بِكِتَابِكَ الَّذِي أَنْزَلْتَ، وَبِنَبِيِّكَ الَّذِي أَرْسَلْتَ",
            count: 1,
            reference: "من قالها ثم مات من ليلته مات على الفطرة. [رواه البخاري ومسلم]"
        },
        {
            text: "اللَّهُمَّ قِنِي عَذَابَكَ يَوْمَ تَبْعَثُ عِبَادَكَ",
            count: 3,
            reference: "كان النبي ﷺ إذا أراد أن يرقد وضع يده اليمنى تحت خده ثم يقول ذلك. [رواه أبو داود والترمذي]"
        },
        {
            text: "بِاسْمِكَ رَبِّي وَضَعْتُ جَنْبِي، وَبِكَ أَرْفَعُهُ، فَإِنْ أَمْسَكْتَ نَفْسِي فَارْحَمْهَا، وَإِنْ أَرْسَلْتَهَا فَاحْفَظْهَا، بِمَا تَحْفَظُ بِهِ عِبَادَكَ الصَّالِحِينَ",
            count: 1,
            reference: "رواه البخاري ومسلم"
        },
        {
            text: "اللَّهُمَّ خَلَقْتَ نَفْسِي وَأَنْتَ تَوَفَّاهَا، لَكَ مَمَاتُهَا وَمَحْيَاهَا، إِنْ أَحْيَيْتَهَا فَاحْفَظْهَا، وَإِنْ أَمَتَّهَا فَاغْفِرْ لَهَا، اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَافِيَةَ",
            count: 1,
            reference: "رواه مسلم"
        },
        {
            text: "سُبْحَانَ اللهِ (33 مرة)، وَالْحَمْدُ لِلَّهِ (33 مرة)، وَاللَّهُ أَكْبَرُ (34 مرة)",
            count: 1,
            reference: "هذا خير لكما من خادم. [رواه البخاري ومسلم]"
        },
        {
            text: "اللَّهُمَّ رَبَّ السَّمَاوَاتِ السَّبْعِ وَرَبَّ الْعَرْشِ الْعَظِيمِ، رَبَّنَا وَرَبَّ كُلِّ شَيْءٍ، فَالِقَ الْحَبِّ وَالنَّوَى، وَمُنْزِلَ التَّوْرَاةِ وَالْإِنْجِيلِ وَالْفُرْقَانِ، أَعُوذُ بِكَ مِنْ شَرِّ كُلِّ شَيْءٍ أَنْتَ آخِذٌ بِنَاصِيَتِهِ، اللَّهُمَّ أَنْتَ الْأَوَّلُ فَلَيْسَ قَبْلَكَ شَيْءٌ، وَأَنْتَ الْآخِرُ فَلَيْسَ بَعْدَكَ شَيْءٌ، وَأَنْتَ الظَّاهِرُ فَلَيْسَ فَوْقَكَ شَيْءٌ، وَأَنْتَ الْبَاطِنُ فَلَيْسَ دُونَكَ شَيْءٌ، اقْضِ عَنَّا الدَّيْنَ، وَأَغْنِنَا مِنَ الْفَقْرِ",
            count: 1,
            reference: "رواه مسلم"
        },
        {
            text: "اللَّهُمَّ إِنِّي أَعُوذُ بِوَجْهِكَ الْكَرِيمِ وَكَلِمَاتِكَ التَّامَّةِ مِنْ شَرِّ مَا أَنْتَ آخِذٌ بِنَاصِيَتِهِ، اللَّهُمَّ أَنْتَ تَكْشِفُ الْمَغْرَمَ وَالْمَأْثَمَ، اللَّهُمَّ لَا يُهْزَمُ جُنْدُكَ، وَلَا يُخْلَفُ وَعْدُكَ، سُبْحَانَكَ وَبِحَمْدِكَ",
            count: 1,
            reference: "رواه أبو داود"
        },
        {
            text: "الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا، وَكَفَانَا، وَآوَانَا، فَكَمْ مِمَّنْ لَا كَافِيَ لَهُ وَلَا مُؤْوِيَ",
            count: 1,
            reference: "رواه مسلم"
        },
        {
            text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ، فَاطِرَ السَّمَاوَاتِ وَالْأَرْضِ، رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ، وَأَنْ أَقْتَرِفَ عَلَى نَفْسِي سُوءًا، أَوْ أَجُرَّهُ إِلَى مُسْلِمٍ",
            count: 1,
            reference: "رواه الترمذي وأبو داود"
        },
        {
            text: "أَعُوذُ بِكَلِمَاتِ اللهِ التَّامَّاتِ مِنْ غَضَبِهِ وَعِقَابِهِ، وَشَرِّ عِبَادِهِ، وَمِنْ هَمَزَاتِ الشَّيَاطِينِ وَأَنْ يَحْضُرُونِ",
            count: 3,
            reference: "رواه أبو داود والترمذي"
        },
        {
            text: "قراءة آية الكرسي: ﴿اللهُ لَا إِلَٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ وَلَا يَئُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ﴾",
            count: 1,
            reference: "من قرأها حين يأوي إلى فراشه لم يزل عليه من الله حافظ، ولا يقربه شيطان حتى يصبح. [رواه البخاري]"
        },
        {
            text: "قراءة آخر آيتين من سورة البقرة: ﴿آمَنَ الرَّسُولُ بِمَا أُنْزِلَ إِلَيْهِ مِنْ رَبِّهِ وَالْمُؤْمِنُونَ كُلٌّ آمَنَ بِاللهِ وَمَلَائِكَتِهِ وَكُتُبِهِ وَرُسُلِهِ لَا نُفَرِّقُ بَيْنَ أَحَدٍ مِنْ رُسُلِهِ وَقَالُوا سَمِعْنَا وَأَطَعْنَا غُفْرَانَكَ رَبَّنَا وَإِلَيْكَ الْمَصِيرُ ۝ لَا يُكَلِّفُ اللهُ نَفْسًا إِلَّا وُسْعَهَا لَهَا مَا كَسَبَتْ وَعَلَيْهَا مَا اكْتَسَبَتْ رَبَّنَا لَا تُؤَاخِذْنَا إِنْ نَسِينَا أَوْ أَخْطَأْنَا رَبَّنَا وَلَا تَحْمِلْ عَلَيْنَا إِصْرًا كَمَا حَمَلْتَهُ عَلَى الَّذِينَ مِنْ قَبْلِنَا رَبَّنَا وَلَا تُحَمِّلْنَا مَا لَا طَاقَةَ لَنَا بِهِ وَاعْفُ عَنَّا وَاغْفِرْ لَنَا وَارْحَمْنَا أَنْتَ مَوْلَانَا فَانْصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ﴾",
            count: 1,
            reference: "من قرأهما في ليلة كفتاه. [رواه البخاري ومسلم]"
        },
        {
            text: "قراءة سورة الإخلاص وسورة الفلق وسورة الناس، ثم ينفث في كفيه ويمسح بهما ما استطاع من جسده، يبدأ بهما على رأسه ووجهه وما أقبل من جسده، يفعل ذلك ثلاث مرات",
            count: 3,
            reference: "رواه البخاري ومسلم"
        },
        {
            text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْهَمِّ وَالْحَزَنِ، وَالْعَجْزِ وَالْكَسَلِ، وَالْبُخْلِ وَالْجُبْنِ، وَضَلَعِ الدَّيْنِ، وَغَلَبَةِ الرِّجَالِ",
            count: 1,
            reference: "رواه البخاري"
        }
    ];

    // الحصول على عنصر حاوية أذكار النوم
    const sleepContainer = document.getElementById('sleep-azkar');
    
    // التحقق من وجود الحاوية
    if (!sleepContainer) {
        console.error('لم يتم العثور على حاوية أذكار النوم');
        return;
    }
    
    // مسح المحتوى الحالي
    sleepContainer.innerHTML = '';
    
    // إضافة الأذكار إلى الحاوية
    sleepAzkar.forEach(zikr => {
        // إنشاء بطاقة الذكر
        const zikrCard = document.createElement('div');
        zikrCard.className = 'zikr-card';
        
        // إنشاء نص الذكر
        const zikrText = document.createElement('div');
        zikrText.className = 'zikr-text';
        
        // إنشاء فقرة النص
        const paragraph = document.createElement('p');
        paragraph.textContent = zikr.text;
        zikrText.appendChild(paragraph);
        
        // إنشاء قسم المصدر إذا كان موجوداً
        if (zikr.reference) {
            const reference = document.createElement('div');
            reference.className = 'zikr-reference';
            reference.textContent = zikr.reference;
            zikrText.appendChild(reference);
        }
        
        // إنشاء قسم العدد
        const zikrCount = document.createElement('div');
        zikrCount.className = 'zikr-count';
        
        // إنشاء نص العدد
        const countText = document.createElement('span');
        countText.textContent = zikr.count > 1 ? `${zikr.count} مرات` : 'مرة واحدة';
        zikrCount.appendChild(countText);
        
        // إنشاء زر العد
        const countButton = document.createElement('button');
        countButton.innerHTML = '<i class="fas fa-plus"></i>';
        
        // إضافة وظيفة العد
        let currentCount = 0;
        countButton.addEventListener('click', function() {
            if (currentCount < zikr.count) {
                currentCount++;
                countText.textContent = `${currentCount}/${zikr.count}`;
                
                // إذا اكتمل العدد، تغيير لون الزر
                if (currentCount === zikr.count) {
                    this.style.backgroundColor = '#84b026';
                }
            }
        });
        
        // إضافة زر العد إلى قسم العدد
        zikrCount.appendChild(countButton);
        
        // إضافة الأقسام إلى بطاقة الذكر
        zikrCard.appendChild(zikrText);
        zikrCard.appendChild(zikrCount);
        
        // إضافة بطاقة الذكر إلى الحاوية
        sleepContainer.appendChild(zikrCard);
    });
});
